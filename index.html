<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Swift-informant by pandemicsyn</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Swift-informant</h1>
          <h2>Swift Informant Middleware</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/pandemicsyn/swift-informant/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/pandemicsyn/swift-informant/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/pandemicsyn/swift-informant" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="swift-informant---" class="anchor" href="#swift-informant---" aria-hidden="true"><span class="octicon octicon-link"></span></a>Swift Informant - <a href="http://travis-ci.org/pandemicsyn/swift-informant"><img src="https://secure.travis-ci.org/pandemicsyn/swift-informant.png?branch=master" alt="Build Status"></a>
</h1>

<p>Swift Proxy Middleware to send events to a <a href="http://github.com/etsy/statsd/" title="statsd">statsd</a> instance.</p>

<p><strong>After</strong> the request has been serviced (using a event posthook) it will fire a statsd counter incrementing the request method's status code.  It breaks these up by whether the request was an operation on an Account, Container, or an Object. In addition to the counter a timer event is fired for the request duration of the event, as well as counter for bytes transferred.</p>

<p>Counter Sample:</p>

<pre><code>obj.GET.200:1|c
</code></pre>

<p>Timer Sample:</p>

<pre><code>duration.acct.GET.200:140|ms
</code></pre>

<p>Bytes Transferred Sample:</p>

<pre><code>tfer.obj.PUT.201 2423.9
</code></pre>

<p>To enable, load informant as the first pipeline entry (even before catcherrors):</p>

<pre><code>pipeline = informant catch_errors healthcheck cache ratelimit proxy-server
</code></pre>

<p>And add the following filter config:</p>

<pre><code>[filter:informant]
use = egg:informant#informant
# statsd_host = 127.0.0.1
# statsd_port = 8125
# standard statsd sample rate 0.0 &lt;= 1
# statsd_sample_rate = 0.5
# list of allowed methods, all others will generate a "BAD_METHOD" event
# valid_http_methods = GET,HEAD,POST,PUT,DELETE,COPY
# send multiple statsd events per packet as supported by statsdpy
# combined_events = no
# prepends name to metric collection output for easier recognition, e.g. company.swift.
# metric_name_prepend = 
</code></pre>

<p>The commented out values are the defaults. This module does not require any additional statsd client modules. 
<strong>To utilize combined_events you'll need to run a statsd server that supports mulitple events per packet such as <a href="https://github.com/pandemicsyn/statsdpyd">statsdpy</a></strong></p>

<h1>
<a id="building-packages" class="anchor" href="#building-packages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building packages</h1>

<p>Clone the version you want and build the package with <a href="https://github.com/astraw/stdeb" title="stdeb">stdeb</a>:</p>

<pre><code>git clone git@github.com:pandemicsyn/swift-informant.git informant-0.0.5
cd informant-0.0.5
git checkout 0.0.5
python setup.py --command-packages=stdeb.command bdist_deb
dpkg -i deb_dist/python-informant_0.0.5-1_all.deb
</code></pre>
        </section>

        <footer>
          Swift-informant is maintained by <a href="https://github.com/pandemicsyn">pandemicsyn</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>